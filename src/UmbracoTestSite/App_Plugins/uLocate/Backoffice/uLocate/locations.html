<div data-ng-controller="uLocate.Controllers.LocationsController" class="uLocate">
    <umb-panel>
        <umb-header>
            <div class="span7">
                <h1>Locations</h1>
            </div>
            <div class="span5">
                <div class="btn-toolbar pull-right umb-btn-toolbar">
                    <div class="btn-group">
                        <!-- TODO: Clicking should add .open to the .btn-group parent div, which will display the dropdown -->
                        <a class="btn">Actions <span class="caret"></span></a>
                        <!-- TODO: In umbraco, this is generated using umb-options-menu, which you can see an example of in Umbraco.Web.UI.Client\build\belle\views\content\edit.html. The actions allowed for this menu item are determined in the uLocate TreeController -->
                        <ul class="dropdown-menu umb-actions">
                            <!-- ngRepeat: action in actions -->
                            <li class="action">
                                <a ng-click="executeMenuItem(action)"><i class="icon icon-add"></i><span class="menu-label">Create</span></a> <!-- TODO: Opens the page to create a new location -->
                            </li>
                            <li class="action sep">
                                <a><i class="icon icon-refresh"></i><span class="menu-label">Reload nodes</span></a> <!-- TODO: Reloads the locations and ideally kicks the cache in the teeth -->
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </umb-header>

        <div class="umb-panel-body">

            <div class="umb-pane">

                <div class="map-wrapper span12">
                    <div class="map-bar top row-fluid">
                        <form class="span7 form-search">
                            <i class="icon-search"></i>
                            <input type="text" placeholder="Search uLocate addresses" class="span12" /> <!-- TODO: Will filter out addresses in the list that match the criteria in the filter (similar to Merchello's filter functionality). Would love it if this automatically happened as you were typing -->
                        </form>
                        <div class="span5">
                            <div class="btn-group pull-right">
                                <a class="btn btn-primary">Create</a> <!-- TODO: Opens the page to create a new location -->
                            </div>
                        </div>
                    </div>
                    <div class="map" id="location-map"></div>
                    <div class="map-bar bottom row-fluid">
                        <div class="span6 form-inline">
                            <label class="control-label">Show:</label>
                            <select class="input-small">
                                <!-- TODO: Sets the amount of items that display on a page -->
                                <option selected="selected">25</option>
                                <option>50</option>
                                <option>100</option>
                            </select>
                        </div>
                        <div class="span6 text-right">
                            <button class="btn btn-link"><i class="icon-left-double-arrow"></i></button> <!-- TODO: Only displays if not the first page -->
                            <span>2 / 3</span> <!-- TODO: current / total pages. Updates based on the amount of items that show -->
                            <button class="btn btn-link"><i class="icon-right-double-arrow"></i></button> <!-- TODO: Only displays if not the last page -->
                        </div>
                    </div>
                </div>
                <!-- Locations -->
                <table class="table table-hover sortable" ng-show="haveLocations()">
                    <thead>
                        <tr>
                            <!-- TODO: Should be able to sort by name, address, phone, lat/long, and type -->
                            <th><input type="checkbox" /></th> <!-- TODO: The only bulk action that should be available is delete. See Janae about the best way to do this? -->
                            <th>Name</th>
                            <th>Address</th>
                            <th>Phone</th>
                            <th>Lat/Long</th>
                            <th>Type</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="location in locations" class="vcard">
                            <!-- TODO: When clicking on the row of an address, it zooms in on the pin -->
                            <td><input type="checkbox" /></td>
                            <td class="fn"><a href class="link-blue" data-ng-click="openViewDialog(location)">Mindfly</a></td>
                            <td class="adr">
                                <span class="street-address">{{location.address.address1}}</span>
                                <span class="extended-address" ng-show="location.address.address2 != ''">{{location.address.address2}}</span>
                                <span class="locality">{{location.address.locality}}</span>, <span class="region">{{location.address.region}}</span> <span class="postal-code">{{location.address.postalCode}}</span>
                                <span class="country-name">{{location.address.countryName}}</span>
                            </td>
                            <td class="tel" ng-show="location.phone != ''">{{location.phone}}</td>
                            <td class="geo">
                                <span class="latitude">{{location.coordinates.latitude}}</span> / <span class="longitude">{{location.coordinates.longitude}}</span>
                            </td>
                            <td>{{location.type}}</td>
                            <td class="btn-group text-right">
                                <a class="btn btn-mini" data-ng-click="openEditDialog(location)"><i class="icon-edit"></i></a>
                                <a class="btn btn-mini btn-danger"><i class="icon-trash"></i></a> <!-- TODO: Should have a delete confirmation; we should check how Umbraco does it - I think it's a generic alert -->
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>

        </div>

    </umb-panel>

    <umb-panel>
        This is a create dialog
    </umb-panel>
</div>