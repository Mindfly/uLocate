<div data-ng-controller="uLocate.Controllers.LocationsController" class="uLocate">

    <!-- The locations view route -->
    <umb-panel ng-hide="selectedView != 'view'">
        <umb-header>
            <div class="span7">
                <h1>Locations</h1>
            </div>
            <div class="span5">
                <!-- TODO: This whole section could be included using umb-options-menu, but there may need to be added functionality. Can be viewed in: Umbraco.Web.UI.Client\src\views\content\edit.html and thedialog itself in Umbraco.Web.UI.Client\src\views\directives\umb-optionsmenu.html -->
                <div class="btn-toolbar pull-right umb-btn-toolbar">
                    <div class="btn-group">
                        <!-- TODO: Clicking should add .open to the .btn-group parent div, which will display the dropdown -->
                        <a class="btn">Actions <span class="caret"></span></a>
                        <!-- TODO: In umbraco, this is generated using umb-options-menu, which you can see an example of in Umbraco.Web.UI.Client\build\belle\views\content\edit.html. The actions allowed for this menu item are determined in the uLocate TreeController -->
                        <ul class="dropdown-menu umb-actions">
                            <!-- ngRepeat: action in actions -->
                            <li class="action">
                                <a><i class="icon icon-add"></i><span class="menu-label">Create</span></a> <!-- TODO: Opens the page to create a new location -->
                            </li>
                            <li class="action sep">
                                <a><i class="icon icon-refresh"></i><span class="menu-label">Reload nodes</span></a> <!-- TODO: Reloads the locations and ideally kicks the cache in the teeth -->
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </umb-header>

        <div class="umb-panel-body">

            <div class="umb-pane">

                <div class="map-wrapper span12">
                    <div class="map-bar top row-fluid">
                        <!-- Search -->
                        <form class="span8 form-search">
                            <i class="icon-search"></i>
                            <input type="text" placeholder="Search uLocate addresses" class="span9" ng-modoel="filter" />
                            <a class="btn btn-primary" ng-click="changeFilter(filter)">Search</a>
                        </form>
                        <div class="span4">
                            <div class="btn-group pull-right">
                                <a class="btn btn-primary">Create</a> <!-- TODO: Opens the page to create a new location -->
                            </div>
                        </div>
                    </div>
                    <div class="map" id="location-map"></div>
                    <div class="map-bar bottom row-fluid">
                        <!-- perPage dropdown -->
                        <div class="span6 form-inline" ng-show="locationsLoaded">
                            <label class="control-label">Show:</label>
                            <select class="input-small" ng-model="selected.perPage" ng-options="option for option in options.perPage" ng-change="updatePerPage(selected.perPage)"></select>
                        </div>
                        <!-- Pagination -->
                        <div class="span6 text-right" ng-show="hasLocations()">
                            <button type="button" class="btn btn-link" ng-click="changePage(-1)" ng-show="page > 0"><i class="icon-left-double-arrow"></i></button>
                            <span>{{page + 1}} / {{totalPages}}</span>
                            <button type="button" class="btn btn-link" ng-click="changePage(1)" ng-show="page < (totalPages - 1)"><i class="icon-right-double-arrow"></i></button>
                        </div>
                    </div>
                </div>
                <!-- Locations -->
                <table class="table table-hover sortable" ng-show="hasLocations()">
                    <thead>
                        <tr>
                            <!-- TODO: Should be able to sort by name, address, phone, lat/long, and type -->
                            <th><input type="checkbox" /></th> <!-- TODO: The only bulk action that should be available is delete. See Janae about the best way to do this? -->
                            <th>Name</th>
                            <th>Address</th>
                            <th>Phone</th>
                            <th>Lat/Long</th>
                            <th>Type</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="location in locations" class="vcard" ng-click="zoomToLocation(location)">
                            <!-- TODO: When clicking on the row of an address, it zooms in on the pin -->
                            <td><input type="checkbox" /></td>
                            <td class="fn"><a href class="link-blue" ng-click="openViewDialog(location)">Mindfly</a></td>
                            <td class="adr">
                                <span class="street-address">{{location.address.streetAddress}}</span>
                                <span class="extended-address" ng-show="location.address.address2 != ''">{{location.address.extendedAddress}}</span>
                                <span class="locality">{{location.address.locality}}</span>, <span class="region">{{location.address.region}}</span> <span class="postal-code">{{location.address.postalCode}}</span>
                                <span class="country-name">{{location.address.countryName}}</span>
                            </td>
                            <td class="tel" ng-show="location.phone != ''">{{location.phone}}</td>
                            <td class="geo">
                                <span class="latitude">{{location.coordinates.latitude}}</span> / <span class="longitude">{{location.coordinates.longitude}}</span>
                            </td>
                            <td>{{location.type}}</td>
                            <td class="btn-group text-right">
                                <a class="btn btn-mini" ng-click="openEditDialog(location)"><i class="icon-edit"></i></a>
                                <a class="btn btn-mini btn-danger"><i class="icon-trash"></i></a> <!-- TODO: Should have a delete confirmation; we should check how Umbraco does it - I think it's a generic alert -->
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>

        </div>

    </umb-panel>

    <!-- The create location route -->
    <umb-panel ng-hide="selectedView != 'create'">
        <umb-header>
            <div class="span7">
                <form>
                    <div class="umb-headline-editor-wrapper">
                        <input type="text" name="name" localize="placeholder" class="umb-headline" placeholder="Enter a name for your location" required=""> <!-- TODO: Displays the name if editing. -->
                        <span class="help-inline" val-msg-for="name" val-toggle-msg="required" style="display: none;">Required</span>
                    </div>
                </form>
            </div>
            <div class="span5">
                <div class="btn-toolbar pull-right umb-btn-toolbar">
                    <div class="btn-group">
                        <a class="btn btn-primary">Save</a> <!-- TODO: Add the save functionality -->
                    </div>
                </div>
            </div>
        </umb-header>
        <div class="umb-panel-body">

            <div class="umb-pane form-horizontal">

                <div class="control-group umb-control-group">
                    <label class="control-label" for="streetAddress">
                        Street Address
                        <small>Street address or c/o</small>
                    </label>

                    <div class="controls controls-row">
                        <input type="text" name="textbox" id="streetAddress" class="umb-editor umb-textstring textstring" required=""> <!-- TODO: The id should match the model name -->

                        <span class="help-inline" style="display: none;">Required</span>
                        <span class="help-inline" style="display: none;"></span>
                    </div>
                </div>

                <div class="control-group umb-control-group">
                    <label class="control-label" for="extendedAddress">
                        Extended Address
                        <small>Suite, apartment, unit, etc</small>
                    </label>

                    <div class="controls controls-row">
                        <input type="text" name="textbox" id="extendedAddress" class="umb-editor umb-textstring textstring"> <!-- TODO: The id should match the model name -->
                    </div>
                </div>

                <div class="control-group umb-control-group">
                    <label class="control-label" for="locality">City</label>

                    <div class="controls controls-row">
                        <input type="text" name="textbox" id="locality" class="umb-editor umb-textstring textstring" required=""> <!-- TODO: The id should match the model name -->

                        <span class="help-inline" style="display: none;">Required</span>
                        <span class="help-inline" style="display: none;"></span>
                    </div>
                </div>
                
                <div class="control-group umb-control-group">
                    <label class="control-label" for="region">State</label>

                    <div class="controls controls-row">
                        <input type="text" name="textbox" id="region" class="umb-editor umb-textstring textstring" required=""> <!-- TODO: The id should match the model name -->

                        <span class="help-inline" style="display: none;">Required</span>
                        <span class="help-inline" style="display: none;"></span>
                    </div>
                </div>

                <div class="control-group umb-control-group">
                    <label class="control-label" for="postalCode">Zip/Postal Code</label>

                    <div class="controls controls-row">
                        <input type="text" name="textbox" id="postalCode" class="umb-editor umb-textstring textstring" required=""> <!-- TODO: The id should match the model name -->

                        <span class="help-inline" style="display: none;">Required</span>
                        <span class="help-inline" style="display: none;"></span>
                    </div>
                </div>

                <div class="control-group umb-control-group">
                    <label class="control-label" for="countryName">Country</label>

                    <div class="controls controls-row">
                        <select id="countryName" class="umb-editor umb-dropdown"> <!-- TODO: The id should match the model name -->
                            <option>Choose...</option>
                        </select>
                        <span class="help-inline" style="display: none;">Required</span>
                        <span class="help-inline" style="display: none;"></span>
                    </div>
                </div>
                
                <div class="control-group umb-control-group">
                    <label class="control-label" for="latitude">
                        Latitutde
                        <small>Optional. Will auto-generate based on address unless entered here.</small>
                    </label>

                    <div class="controls controls-row">
                        <input type="text" name="textbox" id="latitude" class="umb-editor umb-textstring textstring"> <!-- TODO: The id should match the model name -->
                    </div>
                </div>
                
                <div class="control-group umb-control-group">
                    <label class="control-label" for="longitude">
                        Longitude
                        <small>Optional. Will auto-generate based on address unless entered here.</small>
                    </label>

                    <div class="controls controls-row">
                        <input type="text" name="textbox" id="longitude" class="umb-editor umb-textstring textstring"> <!-- TODO: The id should match the model name -->
                    </div>
                </div>
                
                <div class="control-group umb-control-group">
                    <label class="control-label" for="tel">Phone Number</label>

                    <div class="controls controls-row">
                        <input type="text" name="textbox" id="longitude" class="umb-editor umb-textstring textstring" required=""> <!-- TODO: The id should match the model name -->
                    </div>
                </div>
                
                <!-- TODO: All items after this point would be custom items based on a custom location type -->

            </div>

        </div>
    </umb-panel>
</div>